<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="shortcut icon" href="../static/logo.png" type="image/x-icon">
    <link rel="stylesheet" href="../static/style.css">
    <script src="../static/jquery-3.7.0.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.mask/1.14.15/jquery.mask.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.mask/1.14.15/jquery.mask.min.js"></script>
    <title>Registro de Cliente</title>
</head>
<body>
    <div>
        <div style="display: flex; justify-content: space-between; margin: 10px;">
            <div>
                <a href="http://www.tamtec.com.br/"><img class="logologin" src="../static/logo.png" alt=""></a>
                {% block content %}
                    <p class="indicação"> Olá {{nome1}}!</p>
                {% endblock %}
            </div>
            <div>
                <a href="/acessocliente"><h3 class="login">Conta</h3></a>
            </div>
            <div>
                <a href="/logout"><h3 class="login">Logout</h3></a>

            </div>
        
        </div>
        <div>
            
            {% with messages = get_flashed_messages()%}
            {% if messages%}
            {% for message in messages %}
            <p class="mensagem">{{message}}</p>
            {% endfor %}
            {% endif %}
            {% endwith %}
        </div>
        <div id="registroro">
            <Form class="formulário" action="/adicionar_registroro" method="POST" autocomplete="of">
                <div id="cliente">
                    <h1>Solicitação de RO:</h1>
                </div>
                <div id="dados">
                    <div id="dadospessoais">
                        <h2>Dados do cliente</h2>
                        <div class="itens">
                            <label for="nome"><img class="icones" src="../static/name.png" alt=""></label>
                            <input required type="text" name="nomeprinc" placeholder="*Nome"  autocomplete="off">
                        </div>
                        <div class="itens">
                            <label for="telefone"><img class="icones" src="../static/telefone.png" alt=""></label>
                            <input id="telefone" maxlength="15" required type="tel" name="telprinc"  placeholder="*Telefone" onkeypress="$(this).mask('(00) 0000-00009')" autocomplete="off">
                        </div>
                        <div class="itens">
                            <label for="email"><img class="icones" src="../static/e-mail.png" alt=""></label>
                            <input required type="text" name="emailprinc"  placeholder="*Email" autocomplete="off">
                        </div>
                        <div class="itens">
                            <label for="cargo"><img class="icones" src="../static/cargo.png" alt=""></label>
                            <input required type="text" name="cargoprinc"  placeholder="*Cargo" autocomplete="off">
                        </div>
                        <div id="addi">
                            <img id="add" src="../static/add.png" alt="">
                        </div>
                        <div id="adicionar">
                            <div class="itens">
                                <label for="nome1"><img class="icones" src="../static/name.png" alt=""></label>
                                <input type="text" name="nome1princ"  placeholder="Nome" autocomplete="off">
                            </div>
                            <div class="itens">
                                <label for="telefone1"><img class="icones" src="../static/telefone.png" alt=""></label>
                                <input id="telefone1" maxlength="15" type="tel" name="tel1princ"  placeholder="Telefone" onkeypress="$(this).mask('(00) 0000-00009')" autocomplete="off">
                            </div>
                            <div class="itens">
                                <label for="email1"><img class="icones" src="../static/e-mail.png" alt=""></label>
                                <input type="text" name="email1princ"  placeholder="Email" autocomplete="off">
                            </div>
                            <div id="addi2">
                                <img id="add2" src="../static/add2.png" alt="">
                            </div>
                        </div>
                        
                        <div id="adicionar2">
                            <div class="itens">
                                <label for="nome2"><img class="icones" src="../static/name.png" alt=""></label>
                                <input type="text" name="nome2princ" id="nome2" placeholder="Nome" autocomplete="off">
                            </div>
                            <div class="itens">
                                <label for="telefone2"><img class="icones" src="../static/telefone.png" alt=""></label>
                                <input id="telefone2" maxlength="15" type="tel" name="tel2princ"  placeholder="Telefone" onkeypress="$(this).mask('(00) 0000-00009')" autocomplete="off">
                            </div>
                            <div class="itens">
                                <label for="email2"><img class="icones" src="../static/e-mail.png" alt=""></label>
                                <input type="text" name="email2princ" id="email2" placeholder="Email" autocomplete="off">
                            </div>
                        </div>
                    </div>

                    <div id="dadosprofissionais">
                        <h2>Informações da unidade</h2>
                        <div class="itens">
                            <label for="rs"><img class="icones" src="../static/razaosocial.png" alt=""></label>
                            <input required type="text" name="rsprinc"  placeholder="*Orgão" autocomplete="off">
                        </div>
                        <div class="itens">
                            <label for="nomeproj"><img class="icones" src="../static/nomeproj.png" alt=""></label>
                            <input required  type="text" name="nomeprojprinc" placeholder="*Nome do Projeto" autocomplete="off">
                        </div>
                        <div class="itens">
                            <label for="CNPJ"><img class="icones" src="../static/cnpj.png" alt=""></label>
                            <input minlength="14" maxlength="14" required type="text" name="CNPJprinc"  placeholder="*CNPJ - somente números" class="cpf-cnpj" maxlength="14" onkeypress="$(this).mask('00.000.000/0000-00')" autocomplete="off">
                            <div class="resultadoValidacao"></div> 
                        </div>
                        <div class="itens">
                            <label for="unidade"><img class="icones" src="../static/setor.png" alt=""></label>
                            <input required type="text" name="unidadeprinc"  placeholder="*Unidade" autocomplete="off">
                        </div>
                    </div>
                </div>
                   
                    <div id="outros">
                        <h2>Descrição</h2>
                        <form action="categoria" method="POST">
                            <div class="itens">
                                <label for="produtos">Produto</label>
                                <select name="produtos" id="prod">
                                    <option value="">Escolha o produto</option>
                                    {% for categorias in categoria %}
                                        <option value="{{categorias.1}}">{{categorias.1}}</option>
                                    {% endfor%}
                                </select>
                            </div>
                        </form>
                        <div class="itens">
                            <br><textarea required name="observaçãoprinc" id="observação" placeholder="Ex: Esta oportunidade visa o atendimento ás necessidades da (Tamandaré Informática LTDA), possibilitando a (aquisição / locação) de equipamentos do tipo (desktop/ servidores / softwares) para a (renovação do parquer tecnológico / criação de um novo ambiente), para melhor suprir as necessidades do cliente." autocomplete="off"></textarea>
                        </div>
                        <div class="itens">
                            <label for="arquivo"><img class="icones" src="../static/arquivo.png" alt=""></label>
                            <input class="fileimg"  type="file" name="arquivoprinc" id="arquivo" placeholder="Arquivo">
                            <div>
                                <button class="executaValidacao">Cadastrar</button>
                            </div>
                        </div>
                        
                    </div>
                    <div style="display: none;">
                        <div id="prod">
                            <h2 style="color: rgba(42, 32, 111, 0.877)">Produtos</h2>
                            <div id="produto">
                                <div class="itens">
                                    <label for="mod">Modelo/Descrição</label>
                                    <input type="text" name="modelo" id="mod" autocomplete="off">
                                </div>
                                <div class="itens">
                                    <label for="quant">Quantidade</label>
                                    <input type="number" name="quantidade" id="quant">
                                </div>
                            </div>
                            <div class="itens">
                                <label for="arquivo"><img class="icones" src="../static/arquivo.png" alt=""></label>
                                <input class="fileimg"  type="file" name="arquivoprinc" id="arquivo" placeholder="Arquivo">
                            </div>
                        </div>
                        <div id="final">
                            <h2 style="color: rgba(42, 32, 111, 0.877)">Informações adicionais</h2>
                           <div id="caixas">
                            <div class="itens">
                                <label for="quant">Data</label>
                                <input type="date" name="data" autocomplete="off">
                            </div>
                            <div class="itens">
                                <label for="quant">N° RO</label>
                                <input type="text" name="numero" autocomplete="off">
                            </div>
                            <div class="itens">
                                <label for="quant">Status</label>
                                <input type="text" name="status" autocomplete="off">
                            </div>
                            <div class="itens">
                                <label for="quant">Brand</label>
                                <input type="text" name="brand" autocomplete="off">
                            </div>
                           </div>
                            <div class="itens">
                                <br><textarea  name="obs" id="observação" placeholder="Observação" autocomplete="off"></textarea>
                            </div>
                            <div id="adicionarinf">
                                <img id="add" src="../static/add.png" alt="">
                            </div>
                            <div id="caixasmais" style="display: none;">
                                <div class="itens">
                                    <label for="quant">N° RO</label>
                                    <input type="text" name="numero" autocomplete="off">
                                </div>
                                <div class="itens">
                                    <label for="quant">Status</label>
                                    <input type="text" name="status" autocomplete="off">
                                </div>
                                <div class="itens">
                                    <label for="quant">Brand</label>
                                    <input type="text" name="brand" autocomplete="off">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
        </Form>
        </div>
        <div id="logot">
            <img class="logotipo" src="../static/logotipo.png" alt="">
        </div>
    </div>


    <script>
            $("#addi").click(function(){
                $("#adicionar").slideToggle()

            });
            $("#addi2").click(function(){
                $("#adicionar2").slideToggle()

            });
            // Remove máscara e limita quantidade de caracteres ao dar focus
$(".cpf-cnpj").focus(removeMascara);
function removeMascara() {
    $(".cpf-cnpj").unmask();
    $(this).attr("maxlength","14");
};

// Limpa resultado ao dar focusout em campo
$(".cpf-cnpj").focusout(function() {
    $(".resultadoValidacao").html("");
});

// Permite somente uso de caracteres numéricos
$(".cpf-cnpj").keypress(function (e) {
    if (e.which != 8 && e.which != 0 && (e.which < 48 || e.which > 57)) {
    return false;
}
});

// Não permite colar caracteres
$('.cpf-cnpj').bind("paste",function(e) {
    e.preventDefault();
});

// Identifica e valida se o campo é de CPF ou CNPJ
$(".executaValidacao").click(CPFouCNPJ);
function CPFouCNPJ() {
    var contador = $(".cpf-cnpj").val().replace(/[^0-9]/g,"").length;
    if(contador == 0){ 
        $(".resultadoValidacao").removeClass('success').addClass('alert');
        $(".resultadoValidacao").html("Digite o CNPJ");
    } else if(contador == 11){
        if(validaCPF($(".cpf-cnpj").val())) {
            $(".resultadoValidacao").removeClass('alert').addClass('success');
            $(".resultadoValidacao").html("CPF válido");
        } else {
            $(".resultadoValidacao").removeClass('success').addClass('alert');
            $(".resultadoValidacao").html("CPF inválido");
        }
        $(".cpf-cnpj").mask("999.999.999-99");
    } else if(contador == 14) {
        if(validaCNPJ($(".cpf-cnpj").val())) {
            $(".resultadoValidacao").removeClass('alert').addClass('success');
            $(".resultadoValidacao").html("CNPJ válido");
        } else {
            $(".resultadoValidacao").removeClass('success').addClass('alert');
            $(".resultadoValidacao").html("CNPJ inválido");
        }
        $(".cpf-cnpj").mask("99.999.999/9999-99");
    } else {
        $(".resultadoValidacao").removeClass('success').addClass('alert'), 10*3;
        $(".resultadoValidacao").html("CNPJ inválido");
    }
}

// Valida CPF
function validaCPF(cpf) {  
    cpf = cpf.replace(/[^\d]+/g,'');    
    if(cpf == '') return false;   
    if (
        cpf.length != 11 || 
        cpf == "00000000000" || 
        cpf == "11111111111" || 
        cpf == "22222222222" || 
        cpf == "33333333333" || 
        cpf == "44444444444" || 
        cpf == "55555555555" || 
        cpf == "66666666666" || 
        cpf == "77777777777" || 
        cpf == "88888888888" || 
        cpf == "99999999999" || 
        cpf == "01234567890" )
        return false;      
    add = 0;    
    for (i=0; i < 9; i ++)       
    add += parseInt(cpf.charAt(i)) * (10 - i);  
    rev = 11 - (add % 11);  
    if (rev == 10 || rev == 11)     
        rev = 0;    
    if (rev != parseInt(cpf.charAt(9)))     
        return false;    
    add = 0;    
    for (i = 0; i < 10; i ++)        
        add += parseInt(cpf.charAt(i)) * (11 - i);  
    rev = 11 - (add % 11);  
    if (rev == 10 || rev == 11) 
        rev = 0;    
    if (rev != parseInt(cpf.charAt(10)))
        return false;       
    return true;   
}

// Valida CNPJ



    
    </script>
</body>
</html>